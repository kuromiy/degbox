# 作者検索画面 仕様書

## 1. 概要

作者の一覧表示と検索機能を提供する画面。

## 2. URL

- **パス**: `/author/search`
- **クエリパラメータ**:
  - `name`: 作者名（部分一致検索）
  - `page`: ページ番号（デフォルト: 1）
  - `size`: 表示件数（デフォルト: 20）

## 3. 画面遷移

### 遷移元
- ナビゲーションメニュー

### 遷移先
- **作者詳細画面**: 作者項目をクリック → `/author/:authorId`
- **作者登録画面**: 「新規作成」ボタンをクリック → `/author/create`

## 4. 機能要件

### 4.1 検索機能

#### 検索条件
- **作者名検索**: 部分一致検索
- **ページネーション**: ページ番号、表示件数の指定

#### 検索動作
1. 検索フィールドに作者名を入力
2. エンターキーまたは検索ボタンでクエリパラメータを更新
3. ページがリロードされ、検索結果が表示される

### 4.2 表示項目

各作者カードに以下の情報を表示:
- 作者名
- 登録動画数

### 4.3 操作

- **作者項目クリック**: 作者詳細画面へ遷移
- **「新規作成」ボタン**: 作者登録画面へ遷移
- **ページネーション**: 前後のページへ移動

## 5. 画面レイアウト

```
+------------------------------------------+
| ナビゲーション                              |
+------------------------------------------+
| 検索フィールド             [新規作成]        |
| [作者名検索]                               |
+------------------------------------------+
| 作者一覧                                   |
| +--------------------------------------+ |
| | 作者1 | 動画数: 10                     | |
| +--------------------------------------+ |
| | 作者2 | 動画数: 5                      | |
| +--------------------------------------+ |
| ...                                      |
+------------------------------------------+
| ページネーション                            |
| < 1 2 3 >                                |
+------------------------------------------+
```

## 6. 技術仕様

### 6.1 ルーティング

- **URL**: `/author/search`
- **クエリパラメータ**:
  - `name`: 作者名（部分一致検索）
  - `page`: ページ番号（デフォルト: 1）
  - `size`: 表示件数（デフォルト: 20）

### 6.2 API

#### 作者検索API

**エンドポイント**: `src/main/apis/authors/search.ts`（新規作成予定）

**リクエスト**:
```typescript
export interface AuthorSearchRequest {
  name?: string;
  page?: number;
  size?: number;
}
```

**レスポンス**:
```typescript
export interface AuthorSearchResponse {
  count: number;
  result: Array<{
    id: string;
    name: string;
    urls: Record<string, string>;
    videoCount: number;
  }>;
  page: number;
  size: number;
}
```

### 6.3 UIコンポーネント

- **ページコンポーネント**: `src/renderer/pages/author.search.page.tsx`（新規作成）
- **テンプレート**: `features/author/ui/templates/author.search.template.tsx`（新規作成）
- **検索フィールド**: `features/author/ui/components/author.search.field.tsx`（新規作成）
- **作者カード**: `features/author/ui/components/author.card.tsx`（新規作成）

### 6.4 実装例

#### Loaderパターン（React Router）
```typescript
export async function loader({ request }: LoaderFunctionArgs) {
  const url = new URL(request.url);
  const name = url.searchParams.get("name") ?? undefined;

  const pageStr = url.searchParams.get("page");
  const pageNum = pageStr ? Number(pageStr) : Number.NaN;
  const page = Number.isFinite(pageNum) ? pageNum : undefined;

  const sizeStr = url.searchParams.get("size");
  const sizeNum = sizeStr ? Number(sizeStr) : Number.NaN;
  const size = Number.isFinite(sizeNum) ? sizeNum : undefined;

  const response = await client.searchAuthor(name, page, size);
  if (isFailure(response)) {
    throw response.value;
  }
  return response.value;
}
```

## 7. バリデーション

- **作者名**: 特に制限なし（任意の文字列）
- **ページ番号**: 正の整数、無効な値は`undefined`にフォールバック
- **表示件数**: 正の整数、無効な値は`undefined`にフォールバック

## 8. エラーハンドリング

- **API失敗**: エラーメッセージを表示
- **検索結果0件**: 「該当する作者が見つかりませんでした」と表示
- **ネットワークエラー**: リトライボタンを表示

## 9. パフォーマンス要件

- **初期表示**: 1秒以内
- **検索レスポンス**: 500ms以内
- **ページネーション**: スムーズな遷移

## 10. アクセシビリティ

- 検索フィールドに適切なラベル
- キーボードナビゲーション対応
- スクリーンリーダー対応
