# 作者詳細画面 仕様書

## 1. 概要

作者情報の詳細と、その作者に紐づいた動画一覧を表示する画面。

## 2. URL

- **パス**: `/author/:authorId`
- **パスパラメータ**:
  - `authorId`: 作者ID
- **クエリパラメータ**:
  - `videoPage`: 動画一覧のページ番号（デフォルト: 1）
  - `videoSize`: 動画一覧の表示件数（デフォルト: 20）

## 3. 画面遷移

### 遷移元
- 作者検索画面
- ビデオ詳細画面
- 作者登録画面（登録成功後）
- 作者編集画面（更新成功後）

### 遷移先
- **作者編集画面**: 「編集」ボタンをクリック → `/author/:authorId/edit`
- **動画詳細画面**: 動画一覧から動画をクリック → `/video/:videoId`

## 4. 機能要件

### 4.1 表示項目

#### 作者情報
- **作者名**: 作者の名前
- **外部リンク（URLs）**: 複数のURLを表示
  - 各URLにサービス名（キー）を表示
  - リンクをクリックで外部サイトへ遷移
  - URLがない場合は「外部リンクなし」と表示

#### 紐づいた動画一覧
- **動画サムネイル（プレビュー）**: 動画のサムネイル画像
- **動画タイトル**: 動画のタイトル
- **動画登録日時**: 動画の登録日時
- **ページネーション**: ページ番号で動画一覧を切り替え

### 4.2 操作

- **「編集」ボタン**: 作者編集画面へ遷移
- **「削除」ボタン**: 作者削除の確認ダイアログを表示
  - 確認後、作者を削除し、作者検索画面へリダイレクト
- **動画項目クリック**: 動画詳細画面へ遷移
- **ページネーション**: 動画一覧のページを切り替え

## 5. 画面レイアウト

```
+------------------------------------------+
| ナビゲーション                              |
+------------------------------------------+
| 作者情報                                   |
| 作者名: ○○○                               |
| 外部リンク:                                |
| 🐦 Twitter: https://...                  |
| 📺 YouTube: https://...                  |
| 🌐 公式サイト: https://...               |
| [編集] [削除]                              |
+------------------------------------------+
| 紐づいた動画一覧                            |
| +--------------------------------------+ |
| | [動画1サムネイル] タイトル               | |
| +--------------------------------------+ |
| | [動画2サムネイル] タイトル               | |
| +--------------------------------------+ |
| ...                                      |
+------------------------------------------+
| ページネーション                            |
| < 1 2 3 >                                |
+------------------------------------------+
```

## 6. 技術仕様

### 6.1 ルーティング

- **URL**: `/author/:authorId`
- **パスパラメータ**:
  - `authorId`: 作者ID
- **クエリパラメータ**:
  - `videoPage`: 動画一覧のページ番号（デフォルト: 1）
  - `videoSize`: 動画一覧の表示件数（デフォルト: 20）

### 6.2 API

#### 作者詳細取得API

**エンドポイント**: `src/main/apis/authors/detail.ts`（新規作成予定）

**レスポンス**:
```typescript
export interface AuthorDetailResponse {
  id: string;
  name: string;
  urls: Record<string, string>;
  videos: {
    count: number;
    result: Array<{
      id: string;
      title: string;
      thumbnailPath?: string;
      createdAt: string;
    }>;
    page: number;
    size: number;
  };
}
```

#### 作者削除API

**エンドポイント**: `src/main/apis/authors/delete.ts`（新規作成予定）

**リクエスト**:
```typescript
export interface AuthorDeleteRequest {
  id: string;
}
```

**レスポンス**:
```typescript
export interface AuthorDeleteResponse {
  success: boolean;
}
```

### 6.3 UIコンポーネント

- **ページコンポーネント**: `src/renderer/pages/author.detail.page.tsx`（新規作成）
- **テンプレート**: `features/author/ui/templates/author.detail.template.tsx`（新規作成）
- **作者情報**: `features/author/ui/components/author.info.tsx`（新規作成）
- **動画一覧**: `features/video/ui/components/video.list.tsx`（再利用）

### 6.4 URLアイコン表示

URLのキーに応じてアイコンを表示する例:

```typescript
const urlIcons: Record<string, string> = {
  twitter: "🐦",
  youtube: "📺",
  official: "🌐",
  pixiv: "🎨",
  // その他のサービス
};
```

## 7. バリデーション

- **作者ID**: 必須、存在しない場合は404エラー
- **videoPage**: 正の整数、無効な値は`undefined`にフォールバック
- **videoSize**: 正の整数、無効な値は`undefined`にフォールバック

## 8. エラーハンドリング

- **作者が存在しない**: 404エラーページを表示
- **API失敗**: エラーメッセージを表示
- **削除失敗**: エラーメッセージを表示し、詳細画面に留まる
- **動画一覧取得失敗**: 「動画の読み込みに失敗しました」と表示

## 9. 削除確認ダイアログ

### 表示内容
```
「{作者名}」を削除しますか？
この操作は取り消せません。

[キャンセル] [削除]
```

### 動作
- **キャンセル**: ダイアログを閉じる
- **削除**: 作者削除APIを呼び出し、成功したら作者検索画面へリダイレクト

## 10. パフォーマンス要件

- **初期表示**: 1秒以内
- **動画一覧の切り替え**: スムーズなページ遷移

## 11. アクセシビリティ

- 編集・削除ボタンに適切なラベル
- 外部リンクは新しいタブで開く（`target="_blank"` + `rel="noopener noreferrer"`）
- キーボードナビゲーション対応
- スクリーンリーダー対応
